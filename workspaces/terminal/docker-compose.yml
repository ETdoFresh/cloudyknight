services:
  # Frontend UI service
  terminal:
    image: node:20-alpine
    container_name: terminal
    working_dir: /app
    volumes:
      - ./:/app
      - /app/node_modules
    command: sh -c "npm install && npm run dev"
    environment:
      - NODE_ENV=development
      - VITE_HOST=0.0.0.0
    restart: unless-stopped
  
  # Ubuntu terminal with ttyd
  terminal-ttyd:
    build:
      context: .
      dockerfile: Dockerfile.simple
    container_name: terminal-ttyd
    hostname: cloudyknight-terminal
    volumes:
      # Mount all workspaces
      - /home/claude/cloudyknight/workspaces:/workspaces:rw
    environment:
      - TERM=xterm-256color
    restart: unless-stopped
