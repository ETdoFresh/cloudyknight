<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Investment Tracker</title>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>Investment Tracker</h1>
        <div class="header-controls">
          <div class="investor-selector">
            <label for="current-investor">View as:</label>
            <select id="current-investor">
              <option value="all">All Investors</option>
            </select>
          </div>
          <div class="investment-stats">
            <div class="stat-item">Company Valuation: $<span id="company-valuation">0.00</span></div>
            <div class="stat-item">Current Value: $<span id="total">0.00</span></div>
            <div class="stat-item">Available Shares: <span id="available-shares">100.0%</span></div>
          </div>
        </div>
      </header>

      <main>
        <!-- Initial Setup Section -->
        <section id="setup-section" class="setup-section" style="display: none;">
          <h2>Set Company Valuation</h2>
          <div class="setup-content">
            <p>Start by setting the initial company valuation. This will be the base value for calculating share prices.</p>
            <div class="input-group">
              <input type="number" id="company-valuation-input" placeholder="Enter valuation amount ($)" step="1000" min="1">
              <button id="set-valuation">Set Valuation & Start</button>
            </div>
          </div>
        </section>

        <!-- Main Sections -->
        <section class="ownership-section main-section">
          <h2>Ownership Structure</h2>
          <div class="ownership-container">
            <div id="ownership-chart" class="chart-container">
              <canvas id="pieChart"></canvas>
            </div>
            <div id="shareholders-list"></div>
          </div>
        </section>

        <section class="actions-section main-section">
          <h2>Share Transactions</h2>
          <div class="transaction-info">
            <p>Buy shares from the company treasury or sell shares back to the company.</p>
          </div>
          <div class="input-group">
            <input type="text" id="investor-name" placeholder="Investor Name">
            <input type="number" id="share-percentage" min="0.1" max="100" step="0.1" placeholder="Percentage (%)">
            <div class="calculated-value" id="calculated-value">Cost: $0</div>
            <input type="datetime-local" id="share-date">
            <button id="buy-shares">Buy from Company</button>
            <button id="sell-shares">Sell to Company</button>
          </div>
        </section>

        <section class="investor-view-section main-section" id="investor-view" style="display: none;">
          <h2>Personal Investment View: <span id="investor-name-display"></span></h2>
          <div class="investor-stats">
            <div class="stat-card">
              <h3>Total Invested</h3>
              <div class="stat-value" id="personal-invested">$0</div>
            </div>
            <div class="stat-card">
              <h3>Current Value</h3>
              <div class="stat-value" id="personal-value">$0</div>
            </div>
            <div class="stat-card">
              <h3>Profit/Loss</h3>
              <div class="stat-value" id="personal-profit">$0</div>
            </div>
            <div class="stat-card">
              <h3>ROI</h3>
              <div class="stat-value" id="personal-roi">0%</div>
            </div>
          </div>
          <div id="personal-transactions"></div>
        </section>

        <section class="transactions-section main-section">
          <h2>Company Operations</h2>
          <div class="transaction-info">
            <p>Record income and expenses that affect the company's overall value.</p>
          </div>
          <div class="transaction-inputs">
            <select id="transaction-direction">
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
            <input type="number" id="transaction-amount" placeholder="Amount ($)" step="0.01">
            <input type="text" id="transaction-description" placeholder="Description">
            <input type="datetime-local" id="transaction-date">
            <button id="add-transaction">Add Transaction</button>
          </div>
        </section>

        <section class="timeline-section main-section">
          <div id="timeline"></div>
        </section>

        <section class="actions-section main-section">
          <button id="reset-data" class="danger-btn">Reset All Data</button>
        </section>
      </main>
    </div>
    <script type="module" src="/src/main-new.js"></script>
  </body>
</html>