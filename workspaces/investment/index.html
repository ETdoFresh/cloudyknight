<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Share-Based Investment Tracker</title>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>Investment Tracker - Dynamic Investment Model<sup class="info-tooltip">
            <span class="info-icon">?</span>
            <span class="tooltip-text">In this model, new investments dilute existing ownership percentages but maintain value. As more investors contribute, your percentage ownership adjusts while your investment value remains proportional to company performance.</span>
          </sup>
        </h1>
        <div class="header-controls">
          <div class="investment-stats">
            <div class="stat-item">Company Value: $<span id="total">0.00</span></div>
            <div class="stat-item">Total Investment: $<span id="total-investment">0.00</span></div>
          </div>
          <div class="view-selector">
            <label for="investor-view">View as:</label>
            <select id="investor-view">
              <option value="all">All Investors</option>
            </select>
          </div>
        </div>
      </header>

      <main>
        <!-- Ownership Section -->
        <section class="ownership-section">
          <h2>Ownership Structure</h2>
          <div class="ownership-container">
            <div id="ownership-chart" class="chart-container">
              <canvas id="pieChart"></canvas>
            </div>
            <div id="shareholders-list"></div>
          </div>
        </section>

        <!-- Investment Section -->
        <section class="actions-section">
          <h2>Investment/Withdrawal</h2>
          <div class="transaction-info">
            <p>Invest in the company or withdraw funds. Each investment increases company value and grants proportional ownership based on total investments.</p>
          </div>
          <div class="input-group">
            <input type="text" id="investor-name" placeholder="Investor Name">
            <input type="number" id="investment-amount" min="0.01" step="0.01" placeholder="Amount ($)">
            <div class="calculated-value" id="calculated-ownership">Ownership: 0%</div>
            <input type="datetime-local" id="investment-date">
            <button id="invest" class="primary-btn">Invest</button>
            <button id="withdraw" class="primary-btn">Withdraw</button>
          </div>
        </section>

        <!-- Value Charts Section -->
        <section class="chart-section">
          <div class="chart-header">
            <h2 id="chart-title">Company Value Over Time</h2>
            <div class="time-range-selector">
              <button class="time-range-btn active" data-range="6M">6M</button>
              <button class="time-range-btn" data-range="1Y">1Y</button>
              <button class="time-range-btn" data-range="YTD">YTD</button>
              <button class="time-range-btn" data-range="ALL">All</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="valueChart"></canvas>
          </div>
        </section>

        <!-- Transaction History Section -->
        <section class="history-section" id="transaction-history-section" style="display: none;">
          <h2>Transaction History</h2>
          <div id="transaction-history"></div>
        </section>

        <!-- Company Operations Section -->
        <section class="transactions-section">
          <h2>Company Operations</h2>
          <div class="transaction-info">
            <p>Record income and expenses that affect the company's value.</p>
          </div>
          <div class="transaction-inputs">
            <select id="transaction-direction">
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
            <input type="number" id="transaction-amount" placeholder="Amount ($)" step="0.01">
            <input type="text" id="transaction-description" placeholder="Description">
            <input type="datetime-local" id="transaction-date">
            <button id="add-transaction" class="primary-btn">Add Transaction</button>
          </div>
        </section>

        <!-- Data Management -->
        <section class="actions-section">
          <div class="data-actions">
            <button id="export-data" class="secondary-btn">Export Data</button>
            <button id="import-data" class="secondary-btn">Import Data</button>
            <input type="file" id="import-file" accept=".json" style="display: none;">
            <button id="sanitize-data" class="secondary-btn">Sanitize Data</button>
            <button id="reset-data" class="danger-btn">Reset All Data</button>
          </div>
        </section>
      </main>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>